@using Electronic.Models
@model Pedido

@{
    ViewData["Title"] = "Confirmación de Pedido";
}

<h1>Confirmación de Pedido</h1>

@if (TempData["Message"] != null)
{
    <div class="alert alert-success" role="alert">
        @TempData["Message"]
    </div>
}

<p>¡Gracias por tu compra!</p>
<p>Tu pedido número <strong>@Model.Id</strong> ha sido realizado con éxito.</p>
<p>Recibirás un correo electrónico de confirmación con los detalles de tu pedido.</p>

<div class="card mt-4">
    <div class="card-header">
        Detalles del Pedido #@Model.Id
    </div>
    <div class="card-body">
        <p><strong>Fecha del Pedido:</strong> @Model.Date.ToShortDateString()</p>
        <p><strong>Total:</strong> @Model.Total.ToString("C")</p>
        <p><strong>Estado:</strong> @Model.Status</p>
        @if (Model.User != null)
        {
            <p><strong>Cliente:</strong> @Model.User.Name (@Model.User.Email)</p>
        }
        @if (Model.Direccion != null)
        {
            <p><strong>Dirección de Envío:</strong> @($"{Model.Direccion.Street} {Model.Direccion.ExteriorNumber}, {Model.Direccion.Neighborhood}, {Model.Direccion.City}, {Model.Direccion.State} {Model.Direccion.PostalCode}")</p>
        }

        @* Optionally, display order details (DetallePedido) here if included in the model *@
    </div>
</div>

<div class="mt-4">
    @if (Model.Status == PedidoStatus.PENDIENTE)
    {
        <form asp-controller="Order" asp-action="ProcessPayment" method="post" style="display:inline;">
            <input type="hidden" name="orderId" value="@Model.Id" />
            <button type="submit" class="btn btn-success">Proceder al Pago Ahora</button>
        </form>
    }
    <a asp-controller="Home" asp-action="Index" class="btn btn-primary">Volver al Inicio</a>
    @* Optionally, a link to view order history *@
</div>
